<div class="hipotecas-container">
  <!-- HIPOTECA 1 -->
  <div class="hipoteca-form1">
    <h2>Hipoteca 1</h2>
    <form #hipotecaForm1="ngForm" (ngSubmit)="analizarHipoteca1()">
      <label>Banco:
        <input type="text" name="banco1" [(ngModel)]="banco1" (ngModelChange)="guardarSesion1()" required>
      </label>
      <label>Importe de la hipoteca (€):
        <input type="number" name="importe1" [(ngModel)]="importe1" (ngModelChange)="guardarSesion1()" required>
      </label>
      <label>TIN no bonificado (% anual):
        <input type="number" name="tin1" [(ngModel)]="tin1" (ngModelChange)="guardarSesion1()" required step="0.01">
      </label>
      <label>Duración (años):
        <input type="number" name="duracion1" [(ngModel)]="duracion1" required>
      </label>

  <fieldset class="line1">
  <legend><strong>Bonificaciones</strong></legend>

        <!-- Bonificación fija 1 -->
        <div class="bonificacion-row">
          <div class="bonificacion-nombre">
            <span *ngIf="!editNombreBonificacion1">
              {{ nombreBonificacion1 || 'Seguro de Hogar' }}
              <button type="button" (click)="editNombreBonificacion1 = true"><svg class="pencil1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M100.4 417.2C104.5 402.6 112.2 389.3 123 378.5L304.2 197.3L338.1 163.4C354.7 180 389.4 214.7 442.1 267.4L476 301.3L442.1 335.2L260.9 516.4C250.2 527.1 236.8 534.9 222.2 539L94.4 574.6C86.1 576.9 77.1 574.6 71 568.4C64.9 562.2 62.6 553.3 64.9 545L100.4 417.2zM156 413.5C151.6 418.2 148.4 423.9 146.7 430.1L122.6 517L209.5 492.9C215.9 491.1 221.7 487.8 226.5 483.2L155.9 413.5zM510 267.4C493.4 250.8 458.7 216.1 406 163.4L372 129.5C398.5 103 413.4 88.1 416.9 84.6C430.4 71 448.8 63.4 468 63.4C487.2 63.4 505.6 71 519.1 84.6L554.8 120.3C568.4 133.9 576 152.3 576 171.4C576 190.5 568.4 209 554.8 222.5C551.3 226 536.4 240.9 509.9 267.4z"/></svg></button>
              <button type="button" (click)="nombreBonificacion1 = ''"><svg class="trush1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M232.7 69.9L224 96L128 96C110.3 96 96 110.3 96 128C96 145.7 110.3 160 128 160L512 160C529.7 160 544 145.7 544 128C544 110.3 529.7 96 512 96L416 96L407.3 69.9C402.9 56.8 390.7 48 376.9 48L263.1 48C249.3 48 237.1 56.8 232.7 69.9zM512 208L128 208L149.1 531.1C150.7 556.4 171.7 576 197 576L443 576C468.3 576 489.3 556.4 490.9 531.1L512 208z"/></svg></button>
            </span>
            <span *ngIf="editNombreBonificacion1" class="editar-nombre">
              <input type="text" name="nombreBonificacion1" [(ngModel)]="nombreBonificacion1" placeholder="Seguro de Hogar">
              <button type="button" (click)="confirmarBonificacionFija1(1)">✔️</button>
            </span>
          </div>
          <input type="number" class="input" name="bonificacion1" [(ngModel)]="bonificacion1" step="0.01" placeholder="%">
          <input type="number" class="input" name="costeAnualBonificacion1" [(ngModel)]="costeAnualBonificacion1" step="0.01" placeholder="Coste anual">
        </div>

        <!-- Bonificación fija 2 -->
        <div class="bonificacion-row">
          <div class="bonificacion-nombre">
            <span *ngIf="!editNombreBonificacion2">
              {{ nombreBonificacion2 || 'Seguro de Vida' }}
              <button type="button" (click)="editNombreBonificacion2 = true"><svg class="pencil1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M100.4 417.2C104.5 402.6 112.2 389.3 123 378.5L304.2 197.3L338.1 163.4C354.7 180 389.4 214.7 442.1 267.4L476 301.3L442.1 335.2L260.9 516.4C250.2 527.1 236.8 534.9 222.2 539L94.4 574.6C86.1 576.9 77.1 574.6 71 568.4C64.9 562.2 62.6 553.3 64.9 545L100.4 417.2zM156 413.5C151.6 418.2 148.4 423.9 146.7 430.1L122.6 517L209.5 492.9C215.9 491.1 221.7 487.8 226.5 483.2L155.9 413.5zM510 267.4C493.4 250.8 458.7 216.1 406 163.4L372 129.5C398.5 103 413.4 88.1 416.9 84.6C430.4 71 448.8 63.4 468 63.4C487.2 63.4 505.6 71 519.1 84.6L554.8 120.3C568.4 133.9 576 152.3 576 171.4C576 190.5 568.4 209 554.8 222.5C551.3 226 536.4 240.9 509.9 267.4z"/></svg></button>
              <button type="button" (click)="nombreBonificacion2 = ''"><svg class="trush1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M232.7 69.9L224 96L128 96C110.3 96 96 110.3 96 128C96 145.7 110.3 160 128 160L512 160C529.7 160 544 145.7 544 128C544 110.3 529.7 96 512 96L416 96L407.3 69.9C402.9 56.8 390.7 48 376.9 48L263.1 48C249.3 48 237.1 56.8 232.7 69.9zM512 208L128 208L149.1 531.1C150.7 556.4 171.7 576 197 576L443 576C468.3 576 489.3 556.4 490.9 531.1L512 208z"/></svg></button>
            </span>
            <span *ngIf="editNombreBonificacion2" class="editar-nombre">
              <input type="text" name="nombreBonificacion2" [(ngModel)]="nombreBonificacion2" placeholder="Seguro de Vida">
              <button type="button" (click)="confirmarBonificacionFija1(2)">✔️</button>
            </span>
          </div>
          <input type="number" class="input" name="bonificacion2" [(ngModel)]="bonificacion2" step="0.01" placeholder="%">
          <input type="number" class="input" name="costeAnualBonificacion2" [(ngModel)]="costeAnualBonificacion2" step="0.01" placeholder="Coste anual">
        </div>

        <!-- Bonificaciones dinámicas -->
        <ng-container *ngIf="bonificaciones1">
          <div *ngFor="let bonif of bonificaciones1; let i = index" class="bonificacion-row">
            <div class="bonificacion-nombre">
              <span *ngIf="!bonif.editando">
                {{ bonif.nombre || 'Nueva bonificación' }}
                <button type="button" (click)="bonif.editando = true"><svg class="pencil1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M100.4 417.2C104.5 402.6 112.2 389.3 123 378.5L304.2 197.3L338.1 163.4C354.7 180 389.4 214.7 442.1 267.4L476 301.3L442.1 335.2L260.9 516.4C250.2 527.1 236.8 534.9 222.2 539L94.4 574.6C86.1 576.9 77.1 574.6 71 568.4C64.9 562.2 62.6 553.3 64.9 545L100.4 417.2zM156 413.5C151.6 418.2 148.4 423.9 146.7 430.1L122.6 517L209.5 492.9C215.9 491.1 221.7 487.8 226.5 483.2L155.9 413.5zM510 267.4C493.4 250.8 458.7 216.1 406 163.4L372 129.5C398.5 103 413.4 88.1 416.9 84.6C430.4 71 448.8 63.4 468 63.4C487.2 63.4 505.6 71 519.1 84.6L554.8 120.3C568.4 133.9 576 152.3 576 171.4C576 190.5 568.4 209 554.8 222.5C551.3 226 536.4 240.9 509.9 267.4z"/></svg></button>
                <button type="button" (click)="eliminarBonificacion1(i)"><svg class="trush1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M232.7 69.9L224 96L128 96C110.3 96 96 110.3 96 128C96 145.7 110.3 160 128 160L512 160C529.7 160 544 145.7 544 128C544 110.3 529.7 96 512 96L416 96L407.3 69.9C402.9 56.8 390.7 48 376.9 48L263.1 48C249.3 48 237.1 56.8 232.7 69.9zM512 208L128 208L149.1 531.1C150.7 556.4 171.7 576 197 576L443 576C468.3 576 489.3 556.4 490.9 531.1L512 208z"/></svg></button>
              </span>
              <span *ngIf="bonif.editando" class="editar-nombre">
                <input type="text" [(ngModel)]="bonif.nombre" name="bonifNombre1{{i}}" placeholder="Nueva bonificación">
                <button type="button" (click)="confirmarBonificacion1(bonif)">✔️</button>
              </span>
            </div>
            <input type="number" class="input" [(ngModel)]="bonif.porcentaje" name="bonifPorc1{{i}}" step="0.01" placeholder="%">
            <input type="number" class="input" [(ngModel)]="bonif.costeAnual" name="bonifCoste1{{i}}" step="0.01" placeholder="Coste anual">
          </div>
        </ng-container>

        <button type="button" class="add-bonus1" (click)="agregarBonificacion1()">Añadir bonificación</button>
      </fieldset>
      <button type="button" class="delete" (click)="borrarSesion1()">Borrar datos</button>
    </form>

    <div *ngIf="resultado1">
      <h3>Resultado del análisis</h3>
      <p>{{ resultado1 }}</p>
    </div>
  </div>

  <!-- HIPOTECA 2 -->
  <div class="hipoteca-form2">
    <h2>Hipoteca 2</h2>
    <form #hipotecaForm2="ngForm" (ngSubmit)="analizarHipoteca2()">
      <label>Banco:
        <input type="text" name="banco2" [(ngModel)]="banco2" (ngModelChange)="guardarSesion2()" required>
      </label>
      <label>Importe de la hipoteca (€):
        <input type="number" name="importe2" [(ngModel)]="importe2" (ngModelChange)="guardarSesion2()" required>
      </label>
      <label>TIN no bonificado (% anual):
        <input type="number" name="tin2" [(ngModel)]="tin2" (ngModelChange)="guardarSesion2()" required step="0.01">
      </label>
      <label>Duración (años):
        <input type="number" name="duracion2" [(ngModel)]="duracion2" required>
      </label>

  <fieldset class="line2">
        <legend><strong>Bonificaciones</strong></legend>

        <!-- Bonificación fija 1 -->
        <div class="bonificacion-row">
          <div class="bonificacion-nombre">
            <span *ngIf="!editNombreBonificacion1_2">
              {{ nombreBonificacion1_2 || 'Seguro de Hogar' }}
              <button type="button" (click)="editNombreBonificacion1_2 = true"><svg class="pencil2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M100.4 417.2C104.5 402.6 112.2 389.3 123 378.5L304.2 197.3L338.1 163.4C354.7 180 389.4 214.7 442.1 267.4L476 301.3L442.1 335.2L260.9 516.4C250.2 527.1 236.8 534.9 222.2 539L94.4 574.6C86.1 576.9 77.1 574.6 71 568.4C64.9 562.2 62.6 553.3 64.9 545L100.4 417.2zM156 413.5C151.6 418.2 148.4 423.9 146.7 430.1L122.6 517L209.5 492.9C215.9 491.1 221.7 487.8 226.5 483.2L155.9 413.5zM510 267.4C493.4 250.8 458.7 216.1 406 163.4L372 129.5C398.5 103 413.4 88.1 416.9 84.6C430.4 71 448.8 63.4 468 63.4C487.2 63.4 505.6 71 519.1 84.6L554.8 120.3C568.4 133.9 576 152.3 576 171.4C576 190.5 568.4 209 554.8 222.5C551.3 226 536.4 240.9 509.9 267.4z"/></svg></button>
              <button type="button" (click)="nombreBonificacion1_2 = ''"><svg class="trush2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M232.7 69.9L224 96L128 96C110.3 96 96 110.3 96 128C96 145.7 110.3 160 128 160L512 160C529.7 160 544 145.7 544 128C544 110.3 529.7 96 512 96L416 96L407.3 69.9C402.9 56.8 390.7 48 376.9 48L263.1 48C249.3 48 237.1 56.8 232.7 69.9zM512 208L128 208L149.1 531.1C150.7 556.4 171.7 576 197 576L443 576C468.3 576 489.3 556.4 490.9 531.1L512 208z"/></svg></button>
            </span>
            <span *ngIf="editNombreBonificacion1_2" class="editar-nombre">
              <input type="text" name="nombreBonificacion1_2" [(ngModel)]="nombreBonificacion1_2" placeholder="Seguro de Hogar">
              <button type="button" (click)="confirmarBonificacionFija2(1)">✔️</button>
            </span>
          </div>
          <input type="number" class="input" name="bonificacion1_2" [(ngModel)]="bonificacion1_2" step="0.01" placeholder="%">
          <input type="number" class="input" name="costeAnualBonificacion1_2" [(ngModel)]="costeAnualBonificacion1_2" step="0.01" placeholder="Coste anual">
        </div>

        <!-- Bonificación fija 2 -->
        <div class="bonificacion-row">
          <div class="bonificacion-nombre">
            <span *ngIf="!editNombreBonificacion2_2">
              {{ nombreBonificacion2_2 || 'Seguro de Vida' }}
              <button type="button" (click)="editNombreBonificacion2_2 = true"><svg class="pencil2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M100.4 417.2C104.5 402.6 112.2 389.3 123 378.5L304.2 197.3L338.1 163.4C354.7 180 389.4 214.7 442.1 267.4L476 301.3L442.1 335.2L260.9 516.4C250.2 527.1 236.8 534.9 222.2 539L94.4 574.6C86.1 576.9 77.1 574.6 71 568.4C64.9 562.2 62.6 553.3 64.9 545L100.4 417.2zM156 413.5C151.6 418.2 148.4 423.9 146.7 430.1L122.6 517L209.5 492.9C215.9 491.1 221.7 487.8 226.5 483.2L155.9 413.5zM510 267.4C493.4 250.8 458.7 216.1 406 163.4L372 129.5C398.5 103 413.4 88.1 416.9 84.6C430.4 71 448.8 63.4 468 63.4C487.2 63.4 505.6 71 519.1 84.6L554.8 120.3C568.4 133.9 576 152.3 576 171.4C576 190.5 568.4 209 554.8 222.5C551.3 226 536.4 240.9 509.9 267.4z"/></svg></button>
              <button type="button" (click)="nombreBonificacion2_2 = ''"><svg class="trush2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M232.7 69.9L224 96L128 96C110.3 96 96 110.3 96 128C96 145.7 110.3 160 128 160L512 160C529.7 160 544 145.7 544 128C544 110.3 529.7 96 512 96L416 96L407.3 69.9C402.9 56.8 390.7 48 376.9 48L263.1 48C249.3 48 237.1 56.8 232.7 69.9zM512 208L128 208L149.1 531.1C150.7 556.4 171.7 576 197 576L443 576C468.3 576 489.3 556.4 490.9 531.1L512 208z"/></svg></button>
            </span>
            <span *ngIf="editNombreBonificacion2_2" class="editar-nombre">
              <input type="text" name="nombreBonificacion2_2" [(ngModel)]="nombreBonificacion2_2" placeholder="Seguro de Vida">
              <button type="button" (click)="confirmarBonificacionFija2(2)">✔️</button>
            </span>
          </div>
          <input type="number" class="input" name="bonificacion2_2" [(ngModel)]="bonificacion2_2" step="0.01" placeholder="%">
          <input type="number" class="input"name="costeAnualBonificacion2_2" [(ngModel)]="costeAnualBonificacion2_2" step="0.01" placeholder="Coste anual">
        </div>

        <!-- Bonificaciones dinámicas -->
        <ng-container *ngIf="bonificaciones2">
          <div *ngFor="let bonif of bonificaciones2; let i = index" class="bonificacion-row">
            <div class="bonificacion-nombre">
              <span *ngIf="!bonif.editando">
                {{ bonif.nombre || 'Nueva bonificación' }}
                <button type="button" (click)="bonif.editando = true"><svg class="pencil2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M100.4 417.2C104.5 402.6 112.2 389.3 123 378.5L304.2 197.3L338.1 163.4C354.7 180 389.4 214.7 442.1 267.4L476 301.3L442.1 335.2L260.9 516.4C250.2 527.1 236.8 534.9 222.2 539L94.4 574.6C86.1 576.9 77.1 574.6 71 568.4C64.9 562.2 62.6 553.3 64.9 545L100.4 417.2zM156 413.5C151.6 418.2 148.4 423.9 146.7 430.1L122.6 517L209.5 492.9C215.9 491.1 221.7 487.8 226.5 483.2L155.9 413.5zM510 267.4C493.4 250.8 458.7 216.1 406 163.4L372 129.5C398.5 103 413.4 88.1 416.9 84.6C430.4 71 448.8 63.4 468 63.4C487.2 63.4 505.6 71 519.1 84.6L554.8 120.3C568.4 133.9 576 152.3 576 171.4C576 190.5 568.4 209 554.8 222.5C551.3 226 536.4 240.9 509.9 267.4z"/></svg></button>
                <button type="button" (click)="eliminarBonificacion2(i)"><svg class="trush2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M232.7 69.9L224 96L128 96C110.3 96 96 110.3 96 128C96 145.7 110.3 160 128 160L512 160C529.7 160 544 145.7 544 128C544 110.3 529.7 96 512 96L416 96L407.3 69.9C402.9 56.8 390.7 48 376.9 48L263.1 48C249.3 48 237.1 56.8 232.7 69.9zM512 208L128 208L149.1 531.1C150.7 556.4 171.7 576 197 576L443 576C468.3 576 489.3 556.4 490.9 531.1L512 208z"/></svg></button>
              </span>
              <span *ngIf="bonif.editando" class="editar-nombre">
                <input type="text" [(ngModel)]="bonif.nombre" name="bonifNombre2{{i}}" placeholder="Nueva bonificación">
                <button type="button" (click)="confirmarBonificacion2(bonif)">✔️</button>
              </span>
            </div>
            <input type="number" class="input" [(ngModel)]="bonif.porcentaje" name="bonifPorc2{{i}}" step="0.01" placeholder="%">
            <input type="number" class="input" [(ngModel)]="bonif.costeAnual" name="bonifCoste2{{i}}" step="0.01" placeholder="Coste anual">
          </div>
        </ng-container>

        <button type="button" class="add-bonus2" (click)="agregarBonificacion2()">Añadir bonificación</button>
      </fieldset>
      <button type="button" class="delete" (click)="borrarSesion2()">Borrar datos</button>
    </form>

    <div *ngIf="resultado2">
      <h3>Resultado del análisis</h3>
      <p>{{ resultado2 }}</p>
    </div>
  </div>
</div>

<button class="two" type="submit">Comparar</button>
